<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Risko â€” Adresinizin Risk PuanÄ±nÄ± Saniyeler Ä°Ã§inde Ã–ÄŸrenin</title>
    <meta name="description" content="Risko ile deprem, sel, yangÄ±n ve heyelan risklerini tek bir yerden analiz edin." />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = {theme: {extend: {colors: {brand:'#4f46e5', accent:'#06b6d4'}}}, darkMode: 'class'};</script>
  <!-- jsPDF for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="icon" href="/favicon.svg">
    <style>
      /* Minimal additional styles for better visuals */
      .gradient-hero{background:linear-gradient(135deg,#0f172a 0%, #4f46e5 100%);} 
      .glass{backdrop-filter: blur(6px); background-color: rgba(255,255,255,0.6);} 
      .fade-in{opacity:0; transform:translateY(8px); transition:opacity .6s ease, transform .6s ease}
      .fade-in-visible{opacity:1; transform:none}
      
      /* Simple dark-mode overrides for common Tailwind utilities used in the page.
        This keeps dark styling consistent without editing every class. */
      .dark body, .dark main { background: #0b1220 !important; color: #e6eef8 !important; }
      .dark .bg-white { background-color: #0b1220 !important; }
      .dark .text-slate-900 { color: #e6eef8 !important; }
      .dark .text-slate-600 { color: #94a3b8 !important; }
      .dark .text-slate-500 { color: #94a3b8 !important; }
      .dark .bg-slate-50 { background-color: #071023 !important; }
      .dark .bg-slate-200 { background-color: #132034 !important; }
      .dark .border-slate-200 { border-color: rgba(255,255,255,0.06) !important; }
      .dark .shadow-lg { box-shadow: 0 10px 30px rgba(2,6,23,0.6) !important; }

      /* Mouse follower */
      #cursor-follower{position:fixed;left:0;top:0;pointer-events:none;width:120px;height:120px;border-radius:50%;mix-blend-mode:screen;transform:translate(-50%,-50%) scale(.15);transition:transform .15s ease, opacity .2s;opacity:.9;z-index:9999;background:radial-gradient(circle at 30% 30%, rgba(79,70,229,0.35), rgba(6,182,212,0.15) 40%, transparent 60%);} 
      .cta-fancy{background:linear-gradient(90deg,#4f46e5,#06b6d4);box-shadow:0 8px 24px rgba(79,70,229,0.14);color:white}
      .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}

      /* Polished PDF table style in print preview (if shown) */
      .report-table td, .report-table th{padding:6px 8px;border-bottom:1px solid rgba(0,0,0,0.06)}
  /* Dark-mode input & small control tweaks (non-invasive) */
  input, textarea, select {transition: background .18s, color .18s, border-color .18s}
  .dark input, .dark textarea, .dark select, .dark .form-control { background: #071127 !important; color: #e6eef8 !important; border-color: rgba(255,255,255,0.06) !important; }
  .dark input::placeholder, .dark textarea::placeholder { color: #8f9fb3 !important; }
  /* Export button neutral styles */
  .btn-export{background:#f1f5f9;color:#071022;border-radius:8px;padding:6px 10px;border:1px solid rgba(15,23,42,0.04)}
  .dark .btn-export{background:#0b1220;color:#dbe9ff;border:1px solid rgba(255,255,255,0.04)}
  /* Nav button small polish */
  .nav-btn{padding:6px 10px;border-radius:8px;font-weight:600}
  .nav-btn.primary{background:linear-gradient(90deg,#4f46e5,#06b6d4);color:white}
  .nav-btn.ghost{background:transparent;border:1px solid rgba(15,23,42,0.06);color:inherit}
    </style>
  </head>
    <body class="antialiased bg-slate-50 text-slate-900" data-theme="light">
    <header class="py-6">
      <div class="max-w-5xl mx-auto px-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow"><svg width="20" height="20" viewBox="0 0 24 24" fill="#4f46e5" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7v6c0 5 5 9 10 9s10-4 10-9V7l-10-5z"/></svg></div>
          <div>
            <div class="text-lg font-semibold">Risko</div>
            <div class="text-sm text-slate-500">TÃ¼rkiye Afet Risk Analiz Platformu (MVP)</div>
          </div>
        </div>
        <nav class="hidden sm:flex gap-4 text-sm text-slate-600 items-center">
          <button id="btn-login" class="ml-4 px-3 py-1 border rounded text-sm">GiriÅŸ</button>
          <button id="btn-register" class="ml-2 px-3 py-1 bg-brand text-white rounded text-sm">KayÄ±t</button>
          <button id="theme-toggle" aria-label="Toggle theme" class="ml-4 p-2 rounded border"><svg id="theme-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path></svg></button>
        </nav>
      </div>
    </header>

    <main class="max-w-5xl mx-auto px-4">
      <!-- Hero -->
      <section class="grid md:grid-cols-2 gap-8 items-center mb-12">
        <div>
          <h1 class="text-4xl font-extrabold leading-tight text-slate-900">Adresinizin Risk PuanÄ±nÄ± Saniyeler Ä°Ã§inde Ã–ÄŸrenin</h1>
          <p class="mt-4 text-slate-600">Risko ile deprem, sel, yangÄ±n ve heyelan risklerini tek bir yerden analiz edin.</p>

          <div class="mt-6">
            <label class="sr-only">Adres</label>
            <div class="flex gap-2">
              <input id="address-input" class="w-full px-4 py-3 rounded-lg border border-slate-200 shadow-sm" placeholder="Ã–rn: Ä°stanbul, BeyoÄŸlu, Galata" />
              <button id="analyze-btn" class="px-5 py-3 rounded-lg bg-brand text-white font-medium shadow">Riski Sorgula</button>
            </div>
            <p class="mt-2 text-sm text-slate-500">Ãœcretsiz temel analiz: hÄ±zlÄ± Ã¶zet.</p>
          </div>
        <section id="anasayfa" class="grid md:grid-cols-2 gap-8 items-center">
          <div>
            <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900">Risko</h1>
            <p class="mt-4 text-slate-600">Afet riskinizi hÄ±zlÄ±ca Ã¶ÄŸrenin. GerÃ§ek verilere dayanan, aÃ§Ä±klanabilir analizler.</p>
            <div class="mt-6 flex gap-3">
              <button id="cta-analyze" class="px-6 py-3 bg-accent text-white rounded shadow">Hemen Analiz Et</button>
              <a href="#fiyatlandirma" class="px-6 py-3 border border-slate-200 rounded">Paketleri Ä°ncele</a>
            </div>
            <div class="mt-8 text-sm text-slate-500">Kurumsal & Bireysel Ã§Ã¶zÃ¼mler â€” API eriÅŸimi saÄŸlanÄ±r.</div>
          </div>
    <div class="bg-white p-4 rounded-lg shadow">
            <label class="block text-sm text-slate-600">Adres</label>
            <div class="mt-2 flex gap-2">
              <input id="hero-address" class="flex-1 border rounded px-3 py-2" placeholder="Ä°stanbul, BeyoÄŸlu, Galata...">
              <button id="hero-go" class="px-4 py-2 bg-accent text-white rounded">Analiz</button>
            </div>
            <pre id="hero-result" class="mt-4 text-sm bg-slate-50 p-3 rounded hidden"></pre>
          </div>
        </section>

        <!-- Pricing -->
        <section id="fiyatlandirma" class="mt-16">
          <h2 class="text-2xl font-bold">Paketler</h2>
          <p class="mt-2 text-slate-600">Ä°htiyacÄ±nÄ±za uygun planÄ± seÃ§in.</p>
          <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-white p-4 rounded-lg shadow">
              <h3 class="font-semibold">Bireysel</h3>
              <div class="mt-4 text-3xl font-extrabold">Ãœcretsiz</div>
              <ul class="mt-4 text-sm text-slate-600 space-y-2">
                <li>â€¢ 5 Analiz / Ay</li>
                <li>â€¢ Ã–zet risk raporu</li>
              </ul>
              <button class="mt-6 w-full px-4 py-2 bg-slate-100 rounded">SeÃ§</button>
            </div>
            <div class="bg-white p-6 rounded-lg shadow ring-2 ring-accent">
              <h3 class="font-semibold">Premium</h3>
              <div class="mt-4 text-3xl font-extrabold">â‚¬19.99</div>
              <ul class="mt-4 text-sm text-slate-600 space-y-2">
                <li>â€¢ DetaylÄ± rapor</li>
                <li>â€¢ Ã–nleyici Ã¶neriler</li>
              </ul>
              <button class="mt-6 w-full px-4 py-2 bg-accent text-white rounded">SatÄ±n Al</button>
            </div>
            <div class="bg-white p-6 rounded-lg shadow">
              <h3 class="font-semibold">Pro API</h3>
              <div class="mt-4 text-3xl font-extrabold">Kurumsal</div>
              <ul class="mt-4 text-sm text-slate-600 space-y-2">
                <li>â€¢ Toplu Analiz</li>
                <li>â€¢ SLA ve Destek</li>
              </ul>
              <button class="mt-6 w-full px-4 py-2 border border-accent text-accent rounded">Bize UlaÅŸÄ±n</button>
            </div>
          </div>
        </section>

        <!-- Auth -->
        <section id="auth" class="mt-16 grid md:grid-cols-2 gap-6">
          <!-- Simplified login: only title, email/password and submit -->
          <div id="login" class="bg-white p-6 rounded shadow">
            <h3 class="text-lg font-semibold">GiriÅŸ Yap</h3>
            <form id="login-form" class="mt-4 space-y-3">
              <input id="login-email" class="w-full border rounded px-3 py-2 bg-slate-700 text-white placeholder-gray-400 border-slate-600 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="E-posta">
              <input id="login-password" type="password" class="w-full border rounded px-3 py-2 bg-slate-700 text-white placeholder-gray-400 border-slate-600 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="Parola">
              <div class="flex items-center justify-between">
                <button class="px-4 py-2 bg-accent text-white rounded" type="submit">GiriÅŸ Yap</button>
                <a href="#register" class="text-sm text-slate-600">Hesap OluÅŸtur</a>
              </div>
            </form>
          </div>

          <div id="register" class="bg-white p-6 rounded shadow">
            <h3 class="text-lg font-semibold">KayÄ±t Ol</h3>
            <form id="register-form" class="mt-4 space-y-3">
              <input id="reg-name" class="w-full border rounded px-3 py-2 bg-slate-700 text-white placeholder-gray-400 border-slate-600 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="AdÄ±nÄ±z">
              <input id="reg-email" class="w-full border rounded px-3 py-2 bg-slate-700 text-white placeholder-gray-400 border-slate-600 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="E-posta">
              <input id="reg-password" type="password" class="w-full border rounded px-3 py-2 bg-slate-700 text-white placeholder-gray-400 border-slate-600 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="Parola">
              <div class="flex items-center justify-between">
                <button class="px-4 py-2 bg-accent text-white rounded" type="submit">Hesap OluÅŸtur</button>
              </div>
              <div id="register-message" class="mt-2 text-sm"></div>
            </form>
          </div>
        </section>

        <!-- Panel -->
        <section id="panel" class="mt-16 hidden">
          <div class="bg-white p-6 rounded shadow">
            <div class="flex items-center justify-between">
              <h3 class="text-xl font-semibold">Panelim</h3>
              <div class="flex items-center gap-3">
                <button id="logout" class="px-3 py-1 border rounded">Ã‡Ä±kÄ±ÅŸ Yap</button>
              </div>
            </div>

            <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="md:col-span-2">
                <label class="text-sm text-slate-600">Adres Girin</label>
                <div class="mt-2 flex gap-2">
                  <input id="panel-address" class="flex-1 border rounded px-3 py-2" placeholder="Adres, Ä°lÃ§e, Åžehir">
                  <input id="panel-building-age" type="number" min="0" placeholder="Bina yaÅŸÄ± (opsiyonel)" class="w-48 border rounded px-3 py-2">
                  <button id="panel-analyze-btn" class="px-4 py-2 bg-accent text-white rounded">Riski Analiz Et</button>
                </div>

                <div id="analysis-loading" class="mt-6 hidden">
                  <div class="flex items-center gap-3">
                    <svg class="animate-spin h-6 w-6 text-accent" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path></svg>
                    <div>Analiz yapÄ±lÄ±yor, lÃ¼tfen bekleyin...</div>
                  </div>
                </div>

                <div id="analysis-result" class="mt-6 hidden bg-slate-50 p-4 rounded">
                  <h4 class="font-semibold">Genel Risk</h4>
                  <div id="overall-score" class="text-4xl font-extrabold text-slate-900 mt-2">--</div>
                  <div class="mt-4 space-y-4">
                    <div>
                      <div class="flex justify-between text-sm"><span>Deprem</span><span id="r-earthquake">0%</span></div>
                      <div class="w-full bg-slate-200 h-4 rounded mt-1 overflow-hidden"><div id="bar-earthquake" class="h-4 rounded bg-green-500" style="width:0%"></div></div>
                    </div>
                    <div>
                      <div class="flex justify-between text-sm"><span>Sel</span><span id="r-flood">0%</span></div>
                      <div class="w-full bg-slate-200 h-4 rounded mt-1 overflow-hidden"><div id="bar-flood" class="h-4 rounded bg-green-500" style="width:0%"></div></div>
                    </div>
                    <div>
                      <div class="flex justify-between text-sm"><span>YangÄ±n</span><span id="r-fire">0%</span></div>
                      <div class="w-full bg-slate-200 h-4 rounded mt-1 overflow-hidden"><div id="bar-fire" class="h-4 rounded bg-green-500" style="width:0%"></div></div>
                    </div>
                    <div>
                      <div class="flex justify-between text-sm"><span>Heyelan</span><span id="r-landslide">0%</span></div>
                      <div class="w-full bg-slate-200 h-4 rounded mt-1 overflow-hidden"><div id="bar-landslide" class="h-4 rounded bg-green-500" style="width:0%"></div></div>
                    </div>
                  </div>
                </div>

              </div>
              <aside>
                <h4 class="font-semibold">GeÃ§miÅŸ Analizleriniz</h4>
                <div id="history" class="mt-3 text-slate-600">HenÃ¼z kaydedilmiÅŸ analiz yok.</div>
              </aside>
            </div>
          </div>
        </section>
      </main>

      <footer class="bg-white border-t mt-12">
        <div class="max-w-6xl mx-auto px-6 py-6 text-sm text-slate-500">Â© 2025 Risko â€” TÃ¼m haklarÄ± saklÄ±dÄ±r.</div>
      </footer>

      <script>
        // Router helpers
        function show(id){ document.querySelectorAll('main section').forEach(s=>s.classList.add('hidden')); const el=document.getElementById(id); if(el) el.classList.remove('hidden'); }
        document.querySelectorAll('.nav-link').forEach(a=>a.addEventListener('click', e=>{ e.preventDefault(); const href=a.getAttribute('href').replace('#',''); show(href); window.location.hash=href;}));
        document.getElementById('cta-analyze').addEventListener('click', e=>{ e.preventDefault(); show('panel'); window.location.hash='panel'; });

        function apiBase(){ return (window.RISKO_CONFIG && window.RISKO_CONFIG.API_BASE_URL) || ''; }
        function analyzeEndpoint(){ return (window.RISKO_CONFIG && window.RISKO_CONFIG.ENDPOINTS && window.RISKO_CONFIG.ENDPOINTS.RISK_ANALYZE) || '/api/v1/analyze'; }

        async function callAnalyze(body){
          const res = await fetch(apiBase() + analyzeEndpoint(), { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body) });
          if(!res.ok){
            let txt = 'Sunucu hatasÄ±';
            try{ const j = await res.json(); txt = j.detail?.error || j.detail || JSON.stringify(j); }catch(e){}
            throw new Error(txt);
          }
          return await res.json();
        }

        // Hero analyze
        document.getElementById('hero-go').addEventListener('click', async ()=>{
          const addr = document.getElementById('hero-address').value || 'Ä°stanbul';
          const out = document.getElementById('hero-result'); out.classList.remove('hidden'); out.textContent = 'Analiz yapÄ±lÄ±yor...';
          try{ const data = await callAnalyze({ address: addr }); out.textContent = JSON.stringify(data, null, 2); }catch(e){ out.textContent = 'Analiz baÅŸarÄ±sÄ±z: ' + e.message; }
        });

        // Panel analyze
        document.getElementById('panel-analyze-btn').addEventListener('click', async ()=>{
          const addr = document.getElementById('panel-address').value;
          const bld = parseInt(document.getElementById('panel-building-age').value || '0', 10) || undefined;
          if(!addr) return alert('LÃ¼tfen adres girin');
          document.getElementById('analysis-loading').classList.remove('hidden');
          document.getElementById('analysis-result').classList.add('hidden');
          try{
            const data = await callAnalyze({ address: addr, building_age: bld });
            document.getElementById('analysis-loading').classList.add('hidden');
            document.getElementById('overall-score').innerText = Math.round(data.overall_risk_score || 0) + '%';
            const map = {earthquake:['bar-earthquake','r-earthquake'], flood:['bar-flood','r-flood'], fire:['bar-fire','r-fire'], landslide:['bar-landslide','r-landslide']};
            Object.keys(map).forEach(k=>{
              const val = Math.round(data[k + '_risk'] || 0);
              const bar = document.getElementById(map[k][0]);
              document.getElementById(map[k][1]).innerText = val + '%';
              bar.style.width = val + '%';
              bar.className = 'h-4 rounded ' + (val<40 ? 'bg-green-500' : val<70 ? 'bg-yellow-400' : 'bg-red-500');
            });
            document.getElementById('analysis-result').classList.remove('hidden');
          }catch(e){ document.getElementById('analysis-loading').classList.add('hidden'); alert('Analiz baÅŸarÄ±sÄ±z: ' + e.message); }
        });

        // Initial route
        (function(){ const initial = window.location.hash ? window.location.hash.replace('#','') : 'anasayfa'; show(initial); })();

  const navLoginBtn = document.getElementById('nav-login'); if(navLoginBtn) navLoginBtn.addEventListener('click', e=>{ e.preventDefault(); window.location.href = '/login.html'; });
        document.getElementById('nav-panel').addEventListener('click', e=>{ e.preventDefault(); show('panel'); window.location.hash='panel'; });
      </script>
    </body>
    </html>
          <aside>
            <h4 class="font-semibold">GeÃ§miÅŸ Analizleriniz</h4>
            <div class="mt-3 text-gray-600">HenÃ¼z kaydedilmiÅŸ analiz yok.</div>
          </aside>
        </div>
      </div>
    </section>

  </main>

  <script>
  // Simple SPA router
  function showSection(id){
    document.querySelectorAll('main section').forEach(s=>s.classList.add('hidden'));
    const el = document.getElementById(id);
    if(el) el.classList.remove('hidden');
  }

  // Basic navigation hooks
  document.querySelectorAll('.nav-link').forEach(a=>{
    a.addEventListener('click',(e)=>{ e.preventDefault(); const href=a.getAttribute('href').replace('#',''); showSection(href); window.location.hash = href; });
  });
  document.getElementById('hero-analyze').addEventListener('click',(e)=>{e.preventDefault(); showSection('panel'); window.location.hash='panel';});
  document.getElementById('hero-plans').addEventListener('click',(e)=>{e.preventDefault(); showSection('fiyatlandirma'); window.location.hash='fiyatlandirma';});

  // Demo hero analyze button calling backend
  async function callAnalyze(address){
    const body = { address };
    const res = await fetch(window.RISKO_CONFIG.API_BASE_URL + window.RISKO_CONFIG.ENDPOINTS.RISK_ANALYZE, {
      method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify(body)
    });
    return res.ok ? await res.json() : null;
  }

  document.getElementById('hero-do').addEventListener('click', async ()=>{
    const addr = document.getElementById('hero-address').value || 'Ä°stanbul, BeyoÄŸlu, Galata';
    document.getElementById('hero-result').classList.remove('hidden');
    document.getElementById('hero-result').innerHTML = '<div class="text-sm text-gray-600">Analiz yapÄ±lÄ±yor...</div>';
    try{
      const data = await callAnalyze(addr);
      if(!data){ document.getElementById('hero-result').innerHTML = '<div class="text-red-500">Analiz baÅŸarÄ±sÄ±z</div>'; return; }
      document.getElementById('hero-result').innerHTML = `<pre class="text-sm bg-gray-100 p-3 rounded">${JSON.stringify(data,null,2)}</pre>`;
    }catch(e){ document.getElementById('hero-result').innerHTML = '<div class="text-red-500">Hata</div>'; }
  });

  // Panel analyze
  const analyzeBtn = document.getElementById('analyze-btn');
  analyzeBtn.addEventListener('click', async ()=>{
    const addr = document.getElementById('panel-address').value;
    if(!addr) return alert('LÃ¼tfen adres girin');
    document.getElementById('analysis-loading').classList.remove('hidden');
    document.getElementById('analysis-result').classList.add('hidden');
    try{
      const data = await callAnalyze(addr);
      document.getElementById('analysis-loading').classList.add('hidden');
      if(!data){ alert('Analiz baÅŸarÄ±sÄ±z'); return; }
      // set overall
      document.getElementById('overall-score').innerText = Math.round(data.overall_risk_score || 0) + '%';
      // set bars
      const risks = {earthquake: data.earthquake_risk, flood: data.flood_risk, fire: data.fire_risk, landslide: data.landslide_risk};
      const map = {earthquake:['bar-earthquake','r-earthquake'], flood:['bar-flood','r-flood'], fire:['bar-fire','r-fire'], landslide:['bar-landslide','r-landslide']};
      Object.keys(map).forEach(k=>{
        const val = Math.round(risks[k]||0);
        document.getElementById(map[k][0]).style.width = val + '%';
        document.getElementById(map[k][1]).innerText = val + '%';
        const bar = document.getElementById(map[k][0]);
        bar.className = 'h-3 rounded ' + (val<40? 'bg-green-500' : val<70 ? 'bg-yellow-400' : 'bg-red-500');
      });
      document.getElementById('analysis-result').classList.remove('hidden');
    }catch(e){ document.getElementById('analysis-loading').classList.add('hidden'); alert('Hata: ' + e.message); }
  });

  // Simple SPA initial route
  const initial = window.location.hash ? window.location.hash.replace('#','') : 'anasayfa';
  showSection(initial);

  // Login/Register forms (use RisokAuth if supabase is configured)
  document.getElementById('login-form').addEventListener('submit', async (e)=>{ e.preventDefault();
    const email = document.getElementById('login-email').value; const pw = document.getElementById('login-password').value;
    try{ await window.RiskoAuth.init(); const data = await window.RiskoAuth.login(email,pw); alert('GiriÅŸ baÅŸarÄ±lÄ±'); showSection('panel'); }catch(err){ alert('GiriÅŸ baÅŸarÄ±sÄ±z: ' + (err.message||err)); }
  });
  document.getElementById('register-form').addEventListener('submit', async (e)=>{ e.preventDefault();
    const name = document.getElementById('reg-name').value; const email = document.getElementById('reg-email').value; const pw = document.getElementById('reg-password').value;
    const msgEl = document.getElementById('register-message');
    msgEl.innerText = '';
    try{
      await window.RiskoAuth.init();
      const res = await window.RiskoAuth.register(name,email,pw);
      // Show success message
      msgEl.className = 'mt-2 text-sm text-green-600';
      msgEl.innerText = 'KayÄ±t baÅŸarÄ±lÄ±! LÃ¼tfen e-postanÄ±zÄ± doÄŸrulayÄ±n ve giriÅŸ yapÄ±n.';
      // Optionally clear form
      document.getElementById('reg-name').value = '';
      document.getElementById('reg-email').value = '';
      document.getElementById('reg-password').value = '';
      // switch to login view after short delay
  setTimeout(()=>{ window.location.href = '/login.html'; }, 1400);
    }catch(err){
      const msg = err?.message || (err?.error && err.error.message) || JSON.stringify(err);
      msgEl.className = 'mt-2 text-sm text-red-600';
      msgEl.innerText = 'KayÄ±t baÅŸarÄ±sÄ±z: ' + msg;
    }
  });

  // Nav login state (toggle) - naive approach
  async function updateNav(){ try{ await window.RiskoAuth.init(); if(window.RiskoAuth.enabled){ const token = await window.RiskoAuth.getToken(); if(token){ document.getElementById('nav-login').innerText='Panelim'; document.getElementById('nav-login').href='#panel'; document.getElementById('nav-cta').classList.remove('hidden'); return; } } }catch{} document.getElementById('nav-login').innerText='GiriÅŸ Yap'; document.getElementById('nav-login').href='#login'; }
  updateNav();

  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="tr" da                <div class="loading-logo">
                    <i class="fas fa-shield-alt fa-3x text-white mb-3"></i>
                    <h4>Risko</h4>
                    <p class="text-white-50">GeliÅŸtirici: KÃ¼rÅŸat</p>
                </div>eme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risko - Risk Analizi Platformu</title>
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">
    
    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.0/dist/sweetalert2.min.css">
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="./app.css">
    
    <!-- Meta Tags -->
    <meta name="description" content="TÃ¼rkiye'nin en geliÅŸmiÅŸ risk analizi platformu. KapsamlÄ± risk deÄŸerlendirme sistemi.">
    <meta name="keywords" content="risk analizi, deprem, sel, yangÄ±n, gÃ¼venlik, sigorta, platform, tÃ¼rkiye">
    <meta name="author" content="KÃ¼rÅŸat">
    <meta property="og:title" content="Risko">
    <meta property="og:description" content="TÃ¼rkiye'nin en geliÅŸmiÅŸ risk analizi platformu">
    <meta property="og:type" content="website">
    
    <!-- PWA Support -->
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#4f46e5">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
                    <div class="loading-content">
                <div class="loading-logo">
                    <i class="fas fa-shield-alt fa-3x text-white mb-3"></i>
                                            <h1 class="display-4 fw-bold text-white mb-4">
                            <i class="fas fa-shield-alt me-3"></i>Risko
                        </h1>
                    <p class="text-white-50">GeliÅŸmiÅŸ Risk Analizi</p>
                </div>
            <div class="loading-spinner">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">YÃ¼kleniyor...</span>
                </div>
            </div>
            <p class="mt-3 text-muted">Platform baÅŸlatÄ±lÄ±yor...</p>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container d-none">
        <!-- Top Navigation -->
                    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
                <div class="container">
                    <a class="navbar-brand fw-bold" href="#dashboard">
                        <i class="fas fa-shield-alt me-2"></i>Risko
                    </a>

                <!-- Mobile Toggle -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Navigation Items -->
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="#dashboard" data-page="dashboard">
                                <i class="fas fa-chart-line me-2"></i>Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#analysis" data-page="analysis">
                                <i class="fas fa-search me-2"></i>Risk Analizi
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#map" data-page="map">
                                <i class="fas fa-map me-2"></i>Risk HaritasÄ±
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#reports" data-page="reports">
                                <i class="fas fa-file-alt me-2"></i>Raporlar
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-star me-2"></i>Premium
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#premium" data-page="premium">
                                    <i class="fas fa-crown me-2"></i>Premium Ã–zellikler
                                </a></li>
                                <li><a class="dropdown-item" href="#batch-analysis" data-page="batch">
                                    <i class="fas fa-layer-group me-2"></i>Toplu Analiz
                                </a></li>
                                <li><a class="dropdown-item" href="#api-access" data-page="api">
                                    <i class="fas fa-code me-2"></i>API EriÅŸimi
                                </a></li>
                            </ul>
                        </li>
                    </ul>

                    <!-- User Menu -->
                    <div class="navbar-nav">
                        <!-- Theme Toggle -->
                        <div class="nav-item me-3">
                            <button class="theme-toggle nav-link border-0 bg-transparent" id="theme-toggle" type="button">
                                <i class="fas fa-moon" id="theme-icon-moon"></i>
                                <i class="fas fa-sun" id="theme-icon-sun" style="display: none;"></i>
                            </button>
                        </div>
                        
                        <div class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
                                <img src="https://ui-avatars.com/api/?name=Kursat&background=4f46e5&color=fff&size=32" class="rounded-circle me-2" alt="User" id="user-avatar">
                                <span id="user-name">KÃ¼rÅŸat</span>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#profile" data-page="profile">
                                    <i class="fas fa-user me-2"></i>Profil
                                </a></li>
                                <li><a class="dropdown-item" href="#settings" data-page="settings">
                                    <i class="fas fa-cog me-2"></i>Ayarlar
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" id="logout-btn">
                                    <i class="fas fa-sign-out-alt me-2"></i>Ã‡Ä±kÄ±ÅŸ Yap
                                </a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="container-fluid">
                <!-- Page Content Container -->
                <div id="page-content">
                    <!-- Dashboard Page (Default) -->
                    <div id="dashboard-page" class="page-content active">
                        <div class="row">
                            <!-- Welcome Header -->
                            <div class="col-12 mb-4">
                                <div class="card bg-gradient-primary text-white border-0 shadow-lg">
                                    <div class="card-body p-5" style="padding-top: 3rem !important; padding-bottom: 3rem !important;">
                                        <div class="row align-items-center">
                                            <div class="col-md-8">
                                                <h2 class="card-title mb-3 fw-bold">HoÅŸ Geldiniz! ðŸ‘‹</h2>
                                                <p class="card-text mb-4 opacity-90" style="font-size: 1.1rem;">Risko ile risk analizlerinizi gerÃ§ek zamanlÄ± yapÄ±n. Premium Ã¶zelliklerle daha detaylÄ± analizler elde edin.</p>
                                                <button class="btn btn-light btn-lg shadow-sm" data-page="analysis">
                                                    <i class="fas fa-play me-2"></i>Hemen Analiz BaÅŸlat
                                                </button>
                                            </div>
                                            <div class="col-md-4 text-center">
                                                <i class="fas fa-chart-line fa-5x opacity-75"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Stats Cards -->
                            <div class="col-md-3 mb-4">
                                <div class="card border-0 shadow-sm h-100 dashboard-card">
                                    <div class="card-body text-center">
                                        <div class="bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                            <i class="fas fa-search text-primary fa-xl"></i>
                                        </div>
                                        <h3 class="card-title text-primary fw-bold" id="total-analyses">15,420</h3>
                                        <p class="card-text text-muted">Toplam Analiz</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-3 mb-4">
                                <div class="card border-0 shadow-sm h-100 dashboard-card">
                                    <div class="card-body text-center">
                                        <div class="bg-success bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                            <i class="fas fa-shield-check text-success fa-xl"></i>
                                        </div>
                                        <h3 class="card-title text-success fw-bold" id="low-risk-count">8,943</h3>
                                        <p class="card-text text-muted">DÃ¼ÅŸÃ¼k Risk</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-3 mb-4">
                                <div class="card border-0 shadow-sm h-100 dashboard-card">
                                    <div class="card-body text-center">
                                        <div class="bg-warning bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                            <i class="fas fa-exclamation-triangle text-warning fa-xl"></i>
                                        </div>
                                        <h3 class="card-title text-warning fw-bold" id="medium-risk-count">4,235</h3>
                                        <p class="card-text text-muted">Orta Risk</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-3 mb-4">
                                <div class="card border-0 shadow-sm h-100 dashboard-card">
                                    <div class="card-body text-center">
                                        <div class="bg-danger bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                            <i class="fas fa-exclamation-circle text-danger fa-xl"></i>
                                        </div>
                                        <h3 class="card-title text-danger fw-bold" id="high-risk-count">2,242</h3>
                                        <p class="card-text text-muted">YÃ¼ksek Risk</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Recent Activity -->
                            <div class="col-md-8 mb-4">
                                <div class="card border-0 shadow-sm h-100">
                                    <div class="card-header bg-white border-0 pb-0">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-clock me-2 text-primary"></i>Son Aktiviteler
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="recent-activities" class="activity-list">
                                            <!-- Activities will be loaded here -->
                                        </div>
                                        <div class="text-center mt-3">
                                            <button class="btn btn-outline-primary" data-page="reports">
                                                <i class="fas fa-history me-2"></i>TÃ¼m GeÃ§miÅŸi GÃ¶rÃ¼ntÃ¼le
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="col-md-4 mb-4">
                                <div class="card border-0 shadow-sm h-100">
                                    <div class="card-header bg-white border-0 pb-0">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-bolt me-2 text-primary"></i>HÄ±zlÄ± Ä°ÅŸlemler
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-primary" data-page="analysis">
                                                <i class="fas fa-search me-2"></i>Yeni Analiz
                                            </button>
                                            <button class="btn btn-outline-primary" data-page="batch">
                                                <i class="fas fa-layer-group me-2"></i>Toplu Analiz
                                            </button>
                                            <button class="btn btn-outline-success" data-page="map">
                                                <i class="fas fa-map me-2"></i>Harita GÃ¶rÃ¼nÃ¼mÃ¼
                                            </button>
                                            <button class="btn btn-outline-warning" data-page="premium">
                                                <i class="fas fa-crown me-2"></i>Premium'a GeÃ§
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Risk Chart -->
                            <div class="col-12 mb-4">
                                <div class="card border-0 shadow-sm">
                                    <div class="card-header bg-white border-0">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-chart-area me-2 text-primary"></i>Risk Trend Analizi
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="risk-chart" height="400"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Other pages will be loaded here dynamically -->
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-dark text-white py-4 mt-5">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <h6><i class="fas fa-shield-alt me-2"></i>Risko</h6>
                        <p class="text-muted small">GeliÅŸmiÅŸ risk analizi sistemi</p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <div class="social-links">
                            <a href="#" class="text-white me-3"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="text-white me-3"><i class="fab fa-linkedin"></i></a>
                            <a href="#" class="text-white"><i class="fab fa-github"></i></a>
                        </div>
                        <p class="text-muted small mt-2">Â© 2024 Risko. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="position-fixed top-0 end-0 p-3" style="z-index: 9999;"></div>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.0/dist/sweetalert2.all.min.js"></script>
    
    <!-- Configuration -->
    <script src="./config.js"></script>
    
    <!-- Error-safe initialization -->
    <script src="./error-safe-init.js"></script>
    
    <!-- Main App Script -->
    <script src="./app.js"></script>
    
    <!-- Production Test Suite -->
    <script src="./test-platform.js"></script>
</body>
</html>